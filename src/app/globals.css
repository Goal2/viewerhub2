/* ------------------------------------------------------------------
   Tailwind
------------------------------------------------------------------ */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ------------------------------------------------------------------
   Variables & base
------------------------------------------------------------------ */
:root{
  --bg: #0a0c10;
  --text: #e5e7eb;
  --panel: rgba(255,255,255,.04);
  --panel-border: rgba(255,255,255,.10);
  --brand: #9146ff;          /* violet Twitch-like */
  --brand2: #7c4dff;
  --cyan: #22d3ee;
}

html, body{ height: 100%; background: var(--bg); color: var(--text); }
body{
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
a{ color: inherit; text-decoration: none; }
*{ -webkit-tap-highlight-color: transparent; }

/* Focus visible “soft” */
:focus-visible{
  outline: none;
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--brand) 45%, transparent);
  border-radius: .75rem;
}

/* ------------------------------------------------------------------
   HALOS — une seule couche fixe (z-index:0) + bruit très léger
   -> ajoute <div class="vh-halos"></div> dans layout.tsx (juste après <body>)
------------------------------------------------------------------ */
.vh-halos{
  position: fixed;
  inset: -40vmax;            /* déborde => jamais de bord visible */
  z-index: 0;
  pointer-events: none;
  filter: blur(46px) saturate(120%);
  opacity: .9;

  --x1: 16%; --y1: 20%;
  --x2: 82%; --y2: 24%;
  --x3: 58%; --y3: 78%;

  background:
    radial-gradient(60vmax 60vmax at var(--x1) var(--y1),
      color-mix(in oklab, var(--brand) 72%, transparent) 0%,
      transparent 58%),
    radial-gradient(72vmax 72vmax at var(--x2) var(--y2),
      color-mix(in oklab, var(--cyan) 58%, transparent) 0%,
      transparent 62%),
    radial-gradient(52vmax 52vmax at var(--x3) var(--y3),
      color-mix(in oklab, var(--brand2) 44%, transparent) 0%,
      transparent 64%);
  animation:
    halos-drift 46s ease-in-out infinite alternate,
    halos-breathe 12s ease-in-out infinite;
}

/* léger grain très, très doux */
.vh-halos::after{
  content:"";
  position: absolute; inset:-200%;
  background:
    radial-gradient(closest-side, rgba(255,255,255,.06), transparent 70%) 0 0/22px 22px,
    radial-gradient(closest-side, rgba(0,0,0,.05), transparent 70%) 11px 11px/22px 22px;
  filter: blur(6px);
  opacity:.25;
  animation: halos-grain 22s linear infinite;
}

@keyframes halos-drift{
  0%   { --x1: 16%; --y1: 20%; --x2: 82%; --y2: 24%; --x3: 58%; --y3: 78%; }
  35%  { --x1: 22%; --y1: 28%; --x2: 76%; --y2: 30%; --x3: 66%; --y3: 74%; }
  70%  { --x1: 18%; --y1: 24%; --x2: 74%; --y2: 36%; --x3: 52%; --y3: 84%; }
  100% { --x1: 26%; --y1: 18%; --x2: 70%; --y2: 22%; --x3: 60%; --y3: 68%; }
}
@keyframes halos-breathe{
  0%,100%{ filter: blur(42px) saturate(115%); opacity:.88; }
  50%    { filter: blur(54px) saturate(125%); opacity:.95; }
}
@keyframes halos-grain{ to { transform: translate3d(2%,1%,0); } }

/* ------------------------------------------------------------------
   “Glass cards” & borders
------------------------------------------------------------------ */
.glass{
  background:
    radial-gradient(140% 160% at 0% 0%,
      color-mix(in oklab, var(--brand) 16%, transparent), transparent 42%),
    radial-gradient(140% 160% at 100% 0%,
      color-mix(in oklab, var(--cyan) 12%, transparent), transparent 44%),
    var(--panel);
  border: 1px solid var(--panel-border);
  border-radius: 16px;
  backdrop-filter: blur(5px);
}
.card-border{ position:relative; border-radius:16px; }
.card-border::before{
  content:""; position:absolute; inset:0; border-radius:inherit; padding:1px;
  background: linear-gradient(180deg,
    color-mix(in oklab, var(--brand) 50%, transparent),
    color-mix(in oklab, var(--cyan) 25%, transparent));
  -webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);
  -webkit-mask-composite:xor; mask-composite:exclude;
  pointer-events:none;
}

/* ------------------------------------------------------------------
   Onglets “pill”
------------------------------------------------------------------ */
.pill-tabs{ display:flex; gap:.5rem; flex-wrap:wrap; }
.pill-tab{
  padding:.56rem .9rem; border-radius:9999px;
  border:1px solid var(--panel-border);
  background: color-mix(in oklab, white 6%, transparent);
  transition:.2s ease; font-weight:600;
}
.pill-tab:hover{ background:color-mix(in oklab, white 10%, transparent); transform:translateY(-1px); }
.pill-tab[aria-selected="true"], .pill-tab.is-active{
  background: color-mix(in oklab, var(--brand) 18%, transparent);
  border-color: color-mix(in oklab, var(--brand) 50%, transparent);
  box-shadow: inset 0 0 0 4px color-mix(in oklab, var(--brand) 10%, transparent);
}

/* ------------------------------------------------------------------
   Buttons
------------------------------------------------------------------ */
.btn{
  display:inline-flex; align-items:center; gap:.5rem;
  padding:.6rem 1rem; border-radius:.75rem;
  border:1px solid var(--panel-border);
  background: color-mix(in oklab, white 6%, transparent);
  transition:.2s ease;
}
.btn:hover{ background:color-mix(in oklab, white 10%, transparent); transform:translateY(-1px); }

.btn-primary{
  color:#fff; border-color:transparent;
  background: linear-gradient(90deg, var(--brand), var(--brand2) 45%, var(--cyan));
  box-shadow: 0 10px 30px -12px color-mix(in oklab, var(--brand) 45%, transparent);
}
.btn-primary:hover{ filter:brightness(1.05); transform:translateY(-1px); }

/* ------------------------------------------------------------------
   Chips / badges
------------------------------------------------------------------ */
.chip-live{
  display:inline-flex; align-items:center; gap:.35rem;
  background:#ef4444; color:#fff; font-weight:700; font-size:.72rem;
  padding:.22rem .5rem; border-radius:.5rem; letter-spacing:.02em;
}
.chip-off{ display:inline-flex; align-items:center; gap:.35rem;
  background:rgba(255,255,255,.08); padding:.22rem .5rem; border-radius:.5rem; }

/* ------------------------------------------------------------------
   Graph — lissage
------------------------------------------------------------------ */
.recharts-cartesian-grid-horizontal line,
.recharts-cartesian-grid-vertical line{ stroke:rgba(255,255,255,.06)!important; }
.recharts-line-curve, .recharts-line path{ stroke-linecap:round!important; stroke-linejoin:round!important; }
.recharts-dot, .recharts-active-dot circle{
  filter: drop-shadow(0 0 8px color-mix(in oklab, var(--brand) 50%, transparent));
}

/* ------------------------------------------------------------------
   Embeds Twitch (fallback sombre iFrame)
------------------------------------------------------------------ */
.twitch-embed-dark{
  background: rgba(17,20,28,.88);
  border: 1px solid var(--panel-border);
  border-radius: .75rem;
}

/* Helpers */
.text-gradient{
  background: linear-gradient(90deg, var(--brand), var(--cyan));
  -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent;
}
